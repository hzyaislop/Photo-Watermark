# 图片加水印命令行工具开发计划

本项目旨在开发一个 Python 命令行工具，用于为图片批量添加拍摄日期水印。

## 功能需求

1.  **输入**: 接收一个包含图片的目录路径作为输入。
2.  **水印内容**: 自动从每张图片的 EXIF 信息中提取拍摄日期（年月日）。
3.  **自定义选项**:
    *   水印的字体大小。
    *   水印的颜色（支持 RGB 或常用颜色名称）。
    *   水印在图片上的位置（如：左上、左下、右上、右下、居中）。
4.  **输出**:
    *   在输入的图片目录内，创建一个新的子目录，命名为 `原目录名_watermark`。
    *   将添加了水印的图片保存到这个新创建的子目录中。

## 开发步骤

### 1. 项目初始化
- [ ] 创建主 Python 脚本文件 `watermark.py`。
- [ ] 创建 `requirements.txt` 文件，列出所需依赖（如 `Pillow`）。

### 2. 实现命令行参数解析
- [ ] 使用 `argparse` 库来处理命令行参数。
- [ ] 定义以下参数：
    - `directory`: 图片目录路径 (必需)。
    - `--font-size`: 字体大小 (可选, 默认值: 36)。
    - `--color`: 字体颜色 (可选, 默认值: 'white')。
    - `--position`: 水印位置 (可选, 默认值: 'bottom-right')。

### 3. 图片处理核心逻辑
- [ ] 遍历指定目录下的所有图片文件。
- [ ] 对于每张图片：
    - [ ] 使用 `Pillow` 打开图片。
    - [ ] 读取 EXIF 信息，提取拍摄日期。
    - [ ] 如果没有 EXIF 或日期信息，可以跳过或使用文件修改日期作为备选。

### 4. 水印绘制功能
- [ ] 加载一个默认的字体文件（需要随项目分发或指定系统路径）。
- [ ] 根据用户输入的位置参数（如 `bottom-right`），计算文本绘制的精确 (x, y) 坐标。
- [ ] 使用 `ImageDraw.text()` 方法将日期水印绘制到图片上。

### 5. 文件保存
- [ ] 检查并创建输出子目录（`原目录名_watermark`）。
- [ ] 将处理后的图片以原文件名保存到输出目录中。

### 6. 文档和收尾
- [ ] 创建 `README.md` 文件，说明如何安装和使用该工具。
- [ ] 确保代码有适当的注释和错误处理。
